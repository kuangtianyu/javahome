# 内部类

- `内部类`：是定义在另一个类中的类。使用内部类的两个原因：
  - 内部类可以对同一个包中的其他类隐藏。
  - 内部类方法可以访问定义在这个类的作用域中的数据，包括原本私有的数据。

### 1.使用内部类访问对象状态

- 一个内部类方法可以访问自身的数据字段，也可以访问创建它的外围对象的数据字段。
- 内部类的对象总有一个隐式引用，指向创建它的外部类对象
- 外围类的引用在构造器中设置。编译器会修改所有的内部类构造器，添加一个对应外围类引用的参数。
- 只有内部类可以是私有的，而常规类可以有包可见性或公共可见性。

### 2.局部内部类

- 可以在一个方法中局部定义这个类

  ```java
  public void start(){
  	class TimePrinter implements ActionListener{
  		public void actionPerformed(ActionEvent event){
  			System.out.println("At the tone, the time is" + Instant.ofEpochMilli(event.getWhen()));
  			if(beep) Toolkit.getDefaultToolkit().beep();
  		}
  	}
  }
  ```

  什么局部类时不能有访问说明符（即public或private）。局部类的作用域被限定在声明这个局部类的块中。

  除start方法之外，没有任何方法知道TimePrinter类的存在

### 3.匿名内部类

- 假如想创建这个类的对象，甚至不需要为类指定名字。这样一个类被称为`匿名内部类`

- 匿名内部类的语法：

  ```java
  new SuperType(construction parameters){
  	inner class methods and data
  }
  ```

  其中，SuperType可以是接口，内部类就要实现这个接口；SuperType也可以是一个类，内部类就要扩展这个类

- 由于构造器的名字必须和类名相同，而匿名内部类没有类名，所以，匿名内部类不能有构造器。实际上，构造参数要传递给`超类`构造器。具体的，只要内部类实现一个接口，，就不能有任何构造参数。不过，仍然要提供一组小括号

  ```java
  new InterfaceType(){
  	methods and data
  }
  ```

- 如果构造参数列表的结束小括号后面跟一个开始大括号，就是在定义匿名内部类。

### 4.静态内部类

- -如果内部类不需要外围类的对象的引用，就可以将这个内部类声明为static
- 只有内部类可以声明为 static ，静态内部类就类似于其他内部类，只不过静态内部类的对象没有生成它的外围类对象的引用
- 只有内部类不需要访问外围类对象，就应该使用静态内部类，有些程序员用嵌套类表示静态内部类
- 与常规类不同，静态内部类可以有静态字段和方法
- 在接口中声明的内部类自动是static 和 public 