# 使用断言

### 7.4.1 断言的概念

- 断言机制允许在测试期间向代码中插入一些检查，而在生产代码中会自动删除这些检查。

- Java 语言引入了关键字assert。 这个关键字有两种形式：

  - ```
    assert condition;
    ```

  - ```
    assert condition : expression;
    ```

  这两个语句都会计算条件，如果结果为false， 则抛出一个AssertionError异常。在第二个表达式语句中，表达式将传入AssertinError 对象的构造器，并转换成一个消息字符串

- 要想断言x是一个非负数，只需要简单地使用下面这条语句

  ```
  assert x >= 0;
  ```

  或将x的实际值传递给 AssertionError 对象， 以便以后显示

  ```
  assert x >= 0 : x;
  ```

### 7.4.2 启用和禁用断言

- 默认情况下，断言是禁用的。可以在运行程序时用 -enableassertions 或  -ea 选项启用断言：

  ```
  java -enableassertions MyApp
  ```

  不必重新编译程序来启用或禁用断言

- 启用或禁用断言是类加载器的功能。禁用类加载器会去除断言代码，因此，不会降低程序运行的速度

- 有些类不是由类加载器加载，而是直接有虚拟机加载的。可以使用这些开关选择地启用或禁用哪些类中的断言

### 7.4.3 使用断言完成参数检查

- 在Java语言中，给出了3中处理系统错误的机制：
  - 抛出一个异常
  - 日志
  - 使用断言
- 什么时候使用断言：
  - 断言失败是致命的、不可恢复的错误
  - 断言检查只是在开发和测试阶段打开