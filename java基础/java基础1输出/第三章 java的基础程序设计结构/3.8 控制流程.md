# 控制流程

## 3.8.1 块作用域

- 块（block)的概念: 指由若干条Java语句组成的语句，并用一对大括号括起来。
- 块确定了变量的作用域，一个块可以嵌套在另一个块中，但是，不能在嵌套的两个块中声明同名的变量。

## 3.8.2 条件语句

- 条件语句的形式:   if (condition) tatement, 这里的条件必须由小括号括起来

- 其中else部分总是可选的。else子句与最邻近的if构成一组.例如：

  ```java
  if(x <= 0) if (x == 0) sign = 0; else sign = -1;
  ```

  这里的else与第二个if配对。为了清晰，可以使用大括号

## 3.8.3 循环

- 循环分为三种 ： while循环，do while循环， for循环

- while循环:  while(condition) statement : while循环语句在最前面检测循环条件。因此，循环体中的代码有可能一次都不执行，如果希望循环体至少循环一次，需要使用do/while循环将检测放在最后。

  ```java
  while(balance < goal){
  	balance += payment;
  	double interest = balance * interestRate / 100;
  	balance += interest;
  }
  system.out.println(years + "years.");
  ```

- do/while循环: 必须先执行一次循环体，然后再检测循环条件。

  ```java
  do
  {
  	balance += payment;
  	double interest = balance * interestRate / 100;
  	balance += interest;
  	year++;
  }while(input.equals("N"));
  ```

  只要用户回答"N",循环就重复执行。

## 3.8.4 确定循环

- 确定循环其实就是for循环，其有三部分组成：第一部分：对计数器初始化；第二部分：给出每次新一轮循环执行前要检测的循环条件；第三部分：指定如何更新计数器。下面是一个示例：

  ```java
  for(int i = 1; i<=10; i++)
  	System.out.println(i);
  ```

- 注意：尽管Java允许在for循环的各个部分放置任何表达式，但有一条不成文的规定：for语句的3个部分应该对同一个计数器变量进行初始化、检测和更新。

- for循环中变量的作用域：如果在for语句内部定义一个变量，这个变量就不能在for循环之外使用，如下

  ```java
  for(int i = 1; i <= 10; i++){
  	...
  }
  //i no longer defined here
  ```

  如果希望在for循环之外使用循环计数器的最终值，就要确保这个变量在循环之外声明，如下：

  ```java
  int i;
  for(i = 1; i <= 10; i++){
  	...
  }
  //i is still defined here
  ```

  另一方面：可以在不同的for循环中定义同名的变量，这里就不演示了。

- for循环和while循环/do while循环可以相互转换，如果确定循环的次数，就使用for循环，如果至少要执行一次循环体，则可以使用do while循环，不确定循环次数就使用while循环。

## 3.8.5 多重选择： switch语句

- 在处理多个选项时，使用if/else结果显得有些笨拙，于是就有了switch语句。

- switch语句如下：

  ```java
  Scanner in = new Scanner(System.in);
  System.out.print("Select an option (value1,value2,value3,value4)");
  int choice = in.nextInt();
  switch(choice){
  	case value1:
  		...
  		break;
      case value2:
  		...
  		break;  
      case value3:
  		...
  		break;
  	case value4:
  		...
  		break;
  	default:
  		// bad input
  		...
  		break;
  }
  ```

  switch语句将从与选项值相匹配的case标签开始执行，直到遇到break语句，或者执行switch语句的结束处为止。如果没有相匹配的case标签，而有default子句，就执行这个子句。

  **警告**：有可能触发多个case分支，如果在case分支语句末尾没有break语句，那么就会接着执行下一个case分支语句。这种情况相当危险，常常会引发错误。

- case标签可以是：
  - 类型为char,byte,short,int的常量表达式
  - 枚举常量
  - 从Java7开始，case标签还可以是字符串字面量。

## 3.8.6 中断控制流程的语句

- 中断控制流程的语句：break语句 和 continue语句

- break语句:与Sswitch语句的break语句一样，它也可以用于退出循环语句。例如：

  ```java
  while(years <= 100){
  	balance += payment;
  	double interest = balance * interestRate / 100;
  	balance += interest;
  	if(balance >= goal) break;
  	years++;
  }
  ```

  在开始循环是，如果years > 100, 或者在循环体中balance>=goal,则退出循环语句。

- continue语句：它将中断正常的控制流程，将控制转移到最内层循环的首部。例如：

  ```java
  Scanner in = new Scanner(System.in);
  while(sum < goal){
  	System.out.print("Enter a number:");
  	n = in.nextInt();
  	if(n<0) continue;
  	sum += n; // not executed if n < 0
  }
  ```

  如果n<0,则continue语句越过了当前循环体的剩余部分，立刻跳到循环首部。

  如果将continue语句用于for循环中，就可以跳到for循环的“更新”部分。
