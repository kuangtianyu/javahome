# 字符串

- 每个用双引号括起来的字符串都是String类的一个实例

## 3.6.1 子串

- String类中的substring方法可以从一个较大的字符串提取出一个子串。例如：

- ```java
  String greeting = "Hello";
  String s = greeting.substring(0,3);
  ```

  表示从0开始计数，直到3为止，但不包含3

- substring优点：容易计算子 串的长度

## 3.6.2 拼接

- 字符串的拼接按照给定的次序使用 + 号连接，当一个字符串与一个非字符串的值进行拼接时，后者 会转换成字符串。例如：

  ```java
  int age = 12;
  String rating = "PG" + age;
  ```

  将rating设置为  "PG12"

- 在Java11中，还提供了一个repeat方法：

  ```java
  String repeated = "Java".repeat(2); // repeated is "JavaJava"
  ```

## 3.6.3 不可变字符串

- 由于不能修改Java字符串中的单个字符，所以在Java文档中将String类对象称为是*不可变的*

## 3.6.4 检测字符串是否相等

- 可以使用equals方法检测两个字符串是否相等。对于表达式:

  s.equals(t)

  如果字符串s与字符串t相等，则返回true；否则返回false。需要注意的是，s与t可以是字符串变量，也可以是字符串字面量。例如：

  "Hello".equals(greeting)

- 如果不区分大小写，可以使用equalsIgnoreCase方法。
- 注意：一定不要使用 == 运算符检测两个字符串是否相等,这个运算符只能确定两个字符串是否存放在同一个位置。

## 3.6.5 空串与Null串

- 空串""是长度为0的字符串。判断一个字符串是否为空: if(str.length() == 0)  或   if(str.equals(""))
- null 表示目前没有任何对象与该变量关联 判断一个字符串是否为null  if(str == null)

## 3.6.6 码点与代码单元

- Java字符串有char值序列组成。要想得到实际的长度(码点数量)，可以调用:

  ```java
  String greeting = "Hello";
  int n = greeting.length(); //is 5
  int cpCount = greeting.codePointCount(0,greeting.length());
  ```

- 调用s.charAt(n)将返回位置n的代码单元，n介于0~s.length()-1之间，例如:

  ```
   char first = greeting.charAt(0); // first is 'H'
   char last = greeting.charAt(4); //last is 'o'
  ```

- 要想得到第i个码点，应该使用下列语句

  ```
  int index = greeting.offsetByCodePoints(0,i);
  int cp = greeting.codePointAt(index);
  ```

## 3.6.7 StringAPI

- char charAt(int index) : 返回给定位置的代码单元

- int codePoint(int index) : 返回从给定位置开始的码点

- boolean equals(Object other) : 如果字符串与other相等，返回true

- boolean equalsIgnoreCase(String other) : 如果字符串与other相等（忽略大小写),返回true

- boolean startsWith(String prefix) 

- boolean endWith(String suffix)

  如果字符串以prefix开头或者以suffix结尾，则返回true

- int indexOf（String str) :返回与字符串匹配的第一个子串的开始位置,如果原始字符串中不存在str,则返回-1

- int length() :  返回字符串代码单元的个数。

- String replace(CharSequence oldString, CharSequence newString )

  返回一个新字符串。这个字符串用newString代替原始字符串中所有的oldString。可以用String 或 StringBuilder对象作为 CharSequene参数

- String repeat(int count): 返回一个字符串，将当前字符串重复count次

- String substring(int beginIndex)

- String substring(int beginIndex, int endIndex)

  返回一个新字符串。这个字符串包含原始字符串中从beginIndex到字符串末尾或endIndex-1的所有代码单元.

- String toLowerCase()

- String toUpperCase()

  返回一个新字符串。这个字符串将原始字符串中的大写字母改写小写，或者将原始字符串中的所有小写字母改写成大写

## 3.6.9 构建字符串

- 构建一个空的字符串构建器:

  ```java
  StringBuilder builder = new StringBuilder();
  ```

  每次需要添加一部分内容时，就调用append方法

  ```java
  builder.append(ch); //appends a single character
  builder.append(str): // appends a string 
  ```

  在字符串构建完成时就调用toString方法

  ```java
  String completedStrng = builder.toString();
  ```

- StringBuiler() : 构造一个空的字符串构建器
- int length() ： 返回构建器或 缓冲器中的代码单元数量
- StringBuilder append(String str) ： 追加一个代码单元并返回this
- void setCahrAt(int i, char c): 将第i个代码单元设置为c
- StringBuilder insert(int offset,, String str):在offset位置插入一个字符串并返回this
- StringBuilder delete(int startIndex, int endIndex):删除偏移量从startIndex 到 endIndex-1的代码单元并返回this
- Stirng toString(）： 返回一个与构建器或缓冲器内容相同的字符串

