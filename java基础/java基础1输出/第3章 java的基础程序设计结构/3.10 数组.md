# 3.10 数组

## 3.10.1 声明数组

- 概念：数组是一种数据结构，用来存储同一类型的值的集合。通过一个整数`下标`（index，或称索引）可以访问数组中的每一个值。

- 数组的声明：需要指出数组类型（数据元素类型紧跟[])和数组变量的名字。下面声明了整型数组a：

  ```java
  int[] a;
  ```

  这条语句只声明了变量a，并没有将a初始化为一个真正的数组。下面使用new操作符创建数组:

  ```java
  int[] a = new int[100]; // or var a = new int[100];
  ```

  这条语句声明并初始化了一个可以存储100个整数的数组

- 数组长度不要求是常量: new int[n] 会创建一个长度为n的数组。

- 注意：一旦创建了数组，就不能改变它的长度，但是可以改变单个的数组元素

- 定义一个数组变量有两种风格：int[] a;    int a[]    建议使用第一种风格，因为它可以将类型int[] (整型数组)与变量名清晰地分开。

- 在Java中，创建数组对象并同时提供初始值的简写形式:

  ```java
  int[] smallPrimes = {2,3,4,5,6};
  ```

  注意：这个语法中不需要使用new ， 甚至不用指定长度。最后一个值后面允许有逗号，如果你要不断为数组增加值，就会很方便。

- 还可以声明匿名数组：new int[] {2,3,4,5}
- 长度为0 的数组：new elementType[0]    或    new elementType[] {}   注意：长度为0 的数组与null并不相同

## 3.10.2 访问数组元素

- 数组的索引从0开始
- 创建一个数字数组时，所有元素都初始化为0; boolean数组的元素会初始化为false;对象数组的元素则初始化为一个特殊值null, 表示这些元素(还)未存放任何对象。
- 如果访问的下标超过数组的最大下标，就会引发  array index out of bounds 异常
- 获取数组中的元素个数：使用array.length.

## 3.10.3 for each 循环

- 增强for循环：可以依次处理数组中的每一个元素，而不必看指定下标值，格式为:

  ```java
  for(variable : collection) statement
  ```

- for each循环相比于传统的for循环显得更加简洁，更不易出错，因为你不必为下标的起始值和终止值而操心
- 使用Arrays.toString() 方法可以更加简单的打印数组中的所有值

## 3.10.4 数组拷贝

- 如果希望将一个数组的所有值拷贝到一个新的数组中去，就要使用Arrays类的copyOf方法：

  ```java
  int[] copiedLuckyNumbers = Arrays.copyOf(luckyNumbers,luckyNumbers.length);
  ```

  第2个参数是新数组的长度。这个方法通常用来增加数组的大小

- 如果数组的元素是数值型，那么额外的元素将被赋值为0；如果数组元素是布尔型，则将赋值为false。相反，如果长度小于原始数组的长度，则只拷贝前面的值。

## 3.10.5 命令行参数

```java
public static void main(String[] args){};
```

其中有一个带String arg[] 参数的main方法，这个参数表明main方法将接收一个字符串数组，也就是命令行上指定的参数

## 3.10.6 数组排序

- 想要对数组进行排序，可以使用Arrays类中的sort方法：

  ```java
  int[] a = new int[10000];
  ...
  Arrays.sort(a);
  ```

  这个方法使用了优化的快速排序算法，相对于大多数数据集合来说都是系效率比较高的。

- java.util.Arrrays中常用的方法：
  - static String toString(xxx[] a) : 返回包含a中元素的一个字符串，这些元素用中括号包围，并用逗号分隔。在这个方法以及后面的方法中，数组元素类型xx可以是int、long、char、byte、boolean、float或double
  - static xxx[] copyOf(xxx[] a, int end)
  - static xxx[] copyRange(xxx[] a, int start, int end)：返回与a类型相同的一个数组，其长度为length或end-start，数组元素为a的值。如果end大于a.length，结果会填充0或false值。
  - static void sort(xxx[] a):使用优化的快速排序算法对数组进行排序
  - static int binarySearch(xxx[] a,  xxx v)
  - static int binarySearch(xxx[] a, int start , int end, xxx v) :  使用二分法查找算法在有序数组a中查找值v。如果找到v，则返回相应的下标；否则，返回一个负数值r。-r-1是v应插入的位置（为保存a有序）
  - static void fill(xxx[] a, xxx v)：将数组的所有数据元素设置为v。
  - static boolean equeals(xxx[] a, xxx[] b)：如果两个数组大小相同，并且下标相同的元素都对应相等，返回true。

## 3.10.7 多维数组

- 主要是针对二维数组

- 二维数组的声明：例如：

  ```java
  double[][] balances;
  ```

  对数组进行初始化之前是不能使用的

- 二维数组的初始化（根据以上的声明):

  ```java
  balances = new double[NYEARS][NRATES];
  ```

  如果知道数组元素，就可以不调用new，而直接使用简写形式对多维数组进行初始化。例如：

  ```
  int[][] magicSquare = 
  	{
  		{1,2,3,4},
  		{3,4,5,6},
  		{5,6,7,8}
  	};
  ```

- 二维数组的遍历：

  - 使用普通的for循环，例如：

    ```java
    for(int i = 1; i < balances.length; i++){
    	for(int j = 0; j < balances[i].length; j++){
    		double oldBalance = balances[i - 1][j];
    		double interest = ...;
    		balances[i][j] = oldBalance + interest;
    	}
    }
    ```

  - 使用for each循环

    ```java
    for(double[] row : a){
    	for(double value : row){
    		do something with value;
    	}
    }
    ```
